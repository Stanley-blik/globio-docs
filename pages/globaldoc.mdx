# GlobalDoc - Document Database

<div style={{textAlign: 'center', margin: '2rem 0'}}>
  <div style={{fontSize: '1.5rem', marginBottom: '1rem'}}>
    <strong>GlobalDoc</strong> is Globio's Firebase-compatible document database service
  </div>
  <div style={{fontSize: '1.2rem', color: '#6b7280'}}>
    Store, query, and sync JSON documents with real-time updates - all at 99% less cost than Firestore.
  </div>
</div>

<div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem', margin: '2rem 0'}}>
  <div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.75rem', backgroundColor: '#f9fafb', textAlign: 'center'}}>
    <div style={{fontSize: '2.5rem', marginBottom: '0.5rem'}}>üóÑÔ∏è</div>
    <h3 style={{margin: '0.5rem 0'}}>Structured Data</h3>
    <p>Relational database that lives at the edge with ACID transactions</p>
  </div>
  <div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.75rem', backgroundColor: '#f9fafb', textAlign: 'center'}}>
    <div style={{fontSize: '2.5rem', marginBottom: '0.5rem'}}>‚ö°</div>
    <h3 style={{margin: '0.5rem 0'}}>Real-time Sync</h3>
    <p>Instant updates across all connected clients with sub-50ms latency</p>
  </div>
  <div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.75rem', backgroundColor: '#f9fafb', textAlign: 'center'}}>
    <div style={{fontSize: '2.5rem', marginBottom: '0.5rem'}}>üí∞</div>
    <h3 style={{margin: '0.5rem 0'}}>99% Savings</h3>
    <p>Compared to Firebase Firestore with the same performance</p>
  </div>
</div>

## üöÄ Quick Start

<div style={{background: '#f8fafc', padding: '1rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
```javascript
import { GlobalDoc } from '@stanlink/globio'

const globio = new GlobalDoc({
  apiKey: 'your-api-key',
  projectId: 'your-project-id'
})

// Add a document
const users = globio.collection('users')
const docRef = await users.add({
  name: 'John Doe',
  email: 'john@example.com',
  level: 5,
  createdAt: new Date()
})

console.log('Document added with ID:', docRef.id)
```
</div>

## üìö Core Concepts

<FeatureCard title="Collections" icon="üìÇ" color="#0ea5e9">
  Collections are containers for documents. Think of them as tables in a traditional database.
  
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Get a collection reference
  const users = globio.collection('users')
  const posts = globio.collection('posts')
  const gameStats = globio.collection('gameStats')
  ```
  </div>
</FeatureCard>

<FeatureCard title="Documents" icon="üìÑ" color="#0ea5e9">
  Documents are JSON objects stored in collections. Each document has a unique ID.
  
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Add a document with auto-generated ID
  const docRef = await users.add({
    name: 'Alice',
    score: 1500,
    achievements: ['first-win', 'level-10']
  })

  // Add a document with custom ID
  await users.doc('player123').set({
    name: 'Bob',
    score: 2000,
    lastLogin: new Date()
  })
  ```
  </div>
</FeatureCard>
```

## üîç Querying Data

### Simple Queries

<div style={{background: '#f8fafc', padding: '1rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
```javascript
// Get all documents
const snapshot = await users.get()
snapshot.forEach(doc => {
  console.log(doc.id, doc.data())
})

// Query with conditions
const highScorers = await users
  .where('score', '>=', 1000)
  .get()

// Order and limit results
const topPlayers = await users
  .orderBy('score', 'desc')
  .limit(10)
  .get()
```
</div>

### Complex Queries

<div style={{background: '#f8fafc', padding: '1rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
```javascript
// Multiple conditions
const activeHighScorers = await users
  .where('score', '>=', 1000)
  .where('status', '==', 'active')
  .where('lastLogin', '>=', new Date('2024-01-01'))
  .orderBy('score', 'desc')
  .limit(50)
  .get()

// Array queries
const achievementHunters = await users
  .where('achievements', 'array-contains', 'rare-collector')
  .get()

// In queries
const specificUsers = await users
  .where('userId', 'in', ['user1', 'user2', 'user3'])
  .get()
```
</div>

## üìù Writing Data

<FeatureCard title="Adding Documents" icon="‚ûï" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Add with auto-generated ID
  const docRef = await users.add({
    name: 'Charlie',
    level: 1
  })

  // Add with custom ID
  await users.doc('charlie123').set({
    name: 'Charlie',
    level: 1
  })
  ```
  </div>
</FeatureCard>

<FeatureCard title="Updating Documents" icon="‚úèÔ∏è" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Update specific fields
  await users.doc('charlie123').update({
    level: 2,
    lastUpdated: new Date()
  })

  // Set with merge (updates existing fields, adds new ones)
  await users.doc('charlie123').set({
    newField: 'value'
  }, { merge: true })
  ```
  </div>
</FeatureCard>

<FeatureCard title="Deleting Documents" icon="üóëÔ∏è" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Delete a document
  await users.doc('charlie123').delete()

  // Delete a field
  await users.doc('alice123').update({
    temporaryField: null // This deletes the field
  })
  ```
  </div>
</FeatureCard>
```

## ‚ö° Real-time Updates

<FeatureCard title="Listen to Documents" icon="üëÇ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Listen to a single document
  const unsubscribe = users.doc('player123').onSnapshot(doc => {
    if (doc.exists) {
      console.log('Player data:', doc.data())
    }
  })

  // Stop listening
  unsubscribe()
  ```
  </div>
</FeatureCard>

<FeatureCard title="Listen to Collections" icon="üìö" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Listen to all users
  const unsubscribe = users.onSnapshot(snapshot => {
    snapshot.forEach(doc => {
      console.log('User updated:', doc.data())
    })
  })

  // Listen to query results
  const unsubscribe = users
    .where('online', '==', true)
    .onSnapshot(snapshot => {
      console.log('Online users:', snapshot.size)
    })
  ```
  </div>
</FeatureCard>

## üîÑ Batch Operations

<FeatureCard title="Batch Writes" icon="üì¶" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  const batch = globio.batch()

  // Add multiple operations to batch
  batch.set(users.doc('user1'), { name: 'User 1', score: 100 })
  batch.update(users.doc('user2'), { score: 200 })
  batch.delete(users.doc('user3'))

  // Commit all operations atomically
  await batch.commit()
  ```
  </div>
</FeatureCard>

<FeatureCard title="Transactions" icon="üîÑ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  await globio.runTransaction(async (transaction) => {
    // Read data
    const userDoc = await transaction.get(users.doc('player123'))
    const currentScore = userDoc.data().score
    
    // Write data based on read
    transaction.update(users.doc('player123'), {
      score: currentScore + 100,
      lastUpdated: new Date()
    })
  })
  ```
  </div>
</FeatureCard>

## üéÆ Gaming Examples

<FeatureCard title="Player Profiles" icon="üë§" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Create player profile
  await users.doc(playerId).set({
    name: playerName,
    level: 1,
    experience: 0,
    coins: 100,
    inventory: [],
    achievements: [],
    stats: {
      gamesPlayed: 0,
      gamesWon: 0,
      totalPlayTime: 0
    },
    createdAt: new Date(),
    lastLogin: new Date()
  })

  // Level up player
  await globio.runTransaction(async (transaction) => {
    const playerDoc = await transaction.get(users.doc(playerId))
    const player = playerDoc.data()
    
    transaction.update(users.doc(playerId), {
      level: player.level + 1,
      experience: 0, // Reset XP for new level
      coins: player.coins + 50 // Level up bonus
    })
  })
  ```
  </div>
</FeatureCard>

<FeatureCard title="Leaderboards" icon="üèÜ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Get top 10 players by score
  const leaderboard = await users
    .orderBy('score', 'desc')
    .limit(10)
    .get()

  // Get player's rank
  const playersAbove = await users
    .where('score', '>', playerScore)
    .get()
  const playerRank = playersAbove.size + 1
  ```
  </div>
</FeatureCard>

<FeatureCard title="Game Sessions" icon="üéÆ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  const sessions = globio.collection('gameSessions')

  // Start game session
  const sessionRef = await sessions.add({
    playerId: playerId,
    gameMode: 'battle-royale',
    startTime: new Date(),
    status: 'active',
    score: 0,
    kills: 0
  })

  // Update session during game
  await sessionRef.update({
    score: currentScore,
    kills: currentKills,
    lastUpdate: new Date()
  })

  // End session
  await sessionRef.update({
    endTime: new Date(),
    status: 'completed',
    duration: endTime - startTime
  })
  ```
  </div>
</FeatureCard>

## üîí Security Rules

<FeatureCard title="Basic Rules" icon="üîí" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Only authenticated users can read/write their own data
  const userDoc = users.doc(currentUser.uid)
  await userDoc.set(userData) // ‚úÖ Allowed
  await users.doc('otherUser').set(data) // ‚ùå Denied
  ```
  </div>
</FeatureCard>

<FeatureCard title="Collection-level Security" icon="üõ°Ô∏è" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Public leaderboards (read-only for all users)
  const leaderboard = globio.collection('leaderboard')
  const topPlayers = await leaderboard.get() // ‚úÖ Anyone can read

  // Private user data
  const privateData = globio.collection('privateUserData')
  // Only the user can access their own private data
  ```
  </div>
</FeatureCard>

## üìä Performance Tips

<FeatureCard title="Indexing" icon="üîç" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Compound queries require indexes
  // This query needs an index on (status, score)
  const activeTopPlayers = await users
    .where('status', '==', 'active')
    .orderBy('score', 'desc')
    .limit(10)
    .get()
  ```
  </div>
</FeatureCard>

<FeatureCard title="Pagination" icon="üìã" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Efficient pagination
  let lastDoc = null
  const pageSize = 20

  async function getNextPage() {
    let query = users
      .orderBy('createdAt')
      .limit(pageSize)
    
    if (lastDoc) {
      query = query.startAfter(lastDoc)
    }
    
    const snapshot = await query.get()
    lastDoc = snapshot.docs[snapshot.docs.length - 1]
    
    return snapshot.docs.map(doc => doc.data())
  }
  ```
  </div>
</FeatureCard>

<FeatureCard title="Caching" icon="üíæ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Cache frequently accessed data
  const cache = new Map()

  async function getCachedUser(userId) {
    if (cache.has(userId)) {
      return cache.get(userId)
    }
    
    const doc = await users.doc(userId).get()
    const userData = doc.data()
    
    cache.set(userId, userData)
    return userData
  }
  ```
  </div>
</FeatureCard>

## üöÄ Migration from Firestore

<FeatureCard title="Code Changes" icon="üîÑ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Before (Firestore)
  import { getFirestore, collection, addDoc } from 'firebase/firestore'
  const db = getFirestore()
  const usersRef = collection(db, 'users')
  await addDoc(usersRef, userData)

  // After (GlobalDoc)
  import { GlobalDoc } from '@stanlink/globio'
  const globio = new GlobalDoc({ apiKey: 'your-key' })
  const users = globio.collection('users')
  await users.add(userData)
  ```
  </div>
</FeatureCard>

<FeatureCard title="Data Migration" icon="üöö" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Export from Firestore and import to GlobalDoc
  async function migrateCollection(collectionName) {
    // Export from Firestore
    const firestoreSnapshot = await firestoreDb.collection(collectionName).get()
    
    // Import to GlobalDoc
    const batch = globio.batch()
    firestoreSnapshot.forEach(doc => {
      batch.set(globio.collection(collectionName).doc(doc.id), doc.data())
    })
    
    await batch.commit()
    console.log(`Migrated ${collectionName}`)
  }
  ```
  </div>
</FeatureCard>

## üí° Best Practices

<FeatureCard title="Data Structure" icon="üèóÔ∏è" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // ‚úÖ Good: Flat structure
  {
    userId: 'player123',
    name: 'John',
    level: 5,
    stats_gamesPlayed: 100,
    stats_gamesWon: 75
  }

  // ‚ùå Avoid: Deep nesting
  {
    userId: 'player123',
    profile: {
      personal: {
        name: 'John',
        details: {
          level: 5
        }
      }
    }
  }
  ```
  </div>
</FeatureCard>

<FeatureCard title="Field Names" icon="üè∑Ô∏è" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // ‚úÖ Use consistent naming
  {
    createdAt: new Date(),
    updatedAt: new Date(),
    isActive: true,
    playerCount: 4
  }

  // ‚ùå Inconsistent naming
  {
    created_at: new Date(),
    UpdatedTime: new Date(),
    active: true,
    numPlayers: 4
  }
  ```
  </div>
</FeatureCard>

## üîß Advanced Features

<FeatureCard title="Subcollections" icon="üìÅ" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // User's game sessions as subcollection
  const userSessions = users.doc('player123').collection('sessions')
  await userSessions.add({
    gameMode: 'ranked',
    score: 1500,
    date: new Date()
  })
  ```
  </div>
</FeatureCard>

<FeatureCard title="Array Operations" icon=" [] " color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Add to array
  await users.doc('player123').update({
    achievements: arrayUnion('new-achievement')
  })

  // Remove from array
  await users.doc('player123').update({
    achievements: arrayRemove('old-achievement')
  })
  ```
  </div>
</FeatureCard>

<FeatureCard title="Increment Operations" icon="üìà" color="#0ea5e9">
  <div style={{background: '#f8fafc', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', margin: '1rem 0'}}>
  ```javascript
  // Increment score atomically
  await users.doc('player123').update({
    score: increment(100),
    gamesPlayed: increment(1)
  })
  ```
  </div>
</FeatureCard>

---

<div style={{textAlign: 'center', padding: '2rem', backgroundColor: '#f0f9ff', border: '1px solid #bae6fd', borderRadius: '0.75rem', margin: '2rem 0'}}>
  <h2 style={{marginBottom: '1rem'}}>Continue Learning About GlobalDoc</h2>
  <p style={{marginBottom: '1.5rem'}}>Master advanced features and best practices</p>
  <div style={{display: 'flex', justifyContent: 'center', gap: '1rem'}}>
    <a href="/globalsync" style={{backgroundColor: '#0ea5e9', color: 'white', textDecoration: 'none', padding: '0.75rem 1.5rem', borderRadius: '0.5rem', fontWeight: 'bold'}}>Next: Real-time Features</a>
    <a href="/globalvault" style={{backgroundColor: 'white', color: '#0ea5e9', textDecoration: 'none', padding: '0.75rem 1.5rem', borderRadius: '0.5rem', border: '1px solid #0ea5e9', fontWeight: 'bold'}}>GlobalVault</a>
  </div>
</div>